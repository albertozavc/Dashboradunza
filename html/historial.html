<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Historial</title>
  <meta name="description" content="Admin, Dashboard, Bootstrap, Bootstrap 4, Angular, AngularJS" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
  <link rel="apple-touch-icon" href="../assets/images/logo.png">
  <link rel="stylesheet" href="../__MACOSX/assets/styles/tablaregistro.css">
  <meta name="apple-mobile-web-app-title" content="Flatkit">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" sizes="196x196" href="../assets/images/logo.png">
  <link rel="stylesheet" href="../assets/animate.css/animate.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/glyphicons/glyphicons.css" type="text/css" />
  <link rel="stylesheet" href="../assets/font-awesome/css/font-awesome.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/material-design-icons/material-design-icons.css" type="text/css" />
  <link rel="stylesheet" href="../assets/bootstrap/dist/css/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../assets/styles/app.css" type="text/css" />
  <link rel="stylesheet" href="../assets/styles/font.css" type="text/css" />
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            color: #dc2626;
            margin-bottom: 20px;
        }

        #offline-list {
            list-style: none;
            padding: 0;
            max-width: 600px;
            margin: 0 auto;
        }

        #offline-list li {
            background-color: #fee2e2;
            color: #7f1d1d;
            font-size: 1.25rem;
            margin: 10px 0;
            padding: 15px 20px;
            border-left: 5px solid #dc2626;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: left;
        }
    </style>
</head>
<body>
  <div class="app" id="app">
  <div id="aside" class="app-aside modal fade folded md show-text nav-dropdown">
  <div class="left navside black dk" layout="column">
    <div class="navbar no-radius">
      <a class="navbar-brand">
        <div ui-include="'../assets/images/logo.svg'"></div>
        <img src="../assets/images/logo.png" alt="." class="hide">
        <span class="hidden-folded inline">ACCESSONE</span>
      </a>
    </div>
    <div flex class="hide-scroll">
      <nav class="scroll nav-active-primary">
        <ul class="nav" ui-nav>
          <li class="nav-header hidden-folded">
            <small class="text-muted">Opciones</small>
          </li>
          
          <li>
            <a href="dashboard.3.html">
              <span class="nav-icon">
                <i class="material-icons">home</i>
              </span>
              <span class="nav-text">Principal</span>
            </a>
          </li>
          <li>
            <a href="historial.html">
              <span class="nav-icon">
                <i class="material-icons">desktop_access_disabled</i>
              </span>
              <span class="nav-text">Offline</span>
            </a>
          </li>
          <li>

            
            <a href="contact.html">
              <span class="nav-icon">
                <i class="material-icons">contacts</i>
              </span>
              <span class="nav-text">Directorio</span>
            </a>
          </li>
          <li>
            <a href="calendar.html">
              <span class="nav-icon">
                <i class="material-icons">calendar_month</i>
              </span>
              <span class="nav-text">Calendario</span>
            </a>
          </li>
          <li class="nav-header hidden-folded">
            <small class="text-muted">Componentes</small>
          </li>
        </ul>
      </nav>
    </div>
    <div flex-no-shrink>
      <div ui-include="'../views/blocks/aside.top.1.html'"></div>
    </div>
  </div>
</div>
<!-- / aside -->
  <div id="content" class="app-content box-shadow-z0" role="main">
    <div class="app-header white box-shadow">
        <div class="navbar navbar-toggleable-sm flex-row align-items-center">
            <a data-toggle="modal" data-target="#aside" class="hidden-lg-up mr-3">
              <i class="material-icons">&#xe5d2;</i>
            </a>

            <!-- Page title - Bind to $state's title -->
            <div class="mb-0 h5 no-wrap" ng-bind="$state.current.data.title" id="pageTitle"></div>
            <div class="collapse navbar-collapse" id="collapse">
              <ul class="nav navbar-nav mr-auto">
                <li class="nav-item dropdown">
                  <a class="nav-link" href data-toggle="dropdown">
                    <i class="material-icons">directions_car</i>
                  <span>Parking MÃ©xico</span>
                  </a>
                   <div ui-include="'../views/blocks/dropdown.new.html'"></div>
                </li>
              </ul>      
              <div ui-include="'../views/blocks/navbar.form.html'"></div>
            </div>
            <ul class="nav navbar-nav ml-auto flex-row">
              <li class="nav-item dropdown pos-stc-xs">
                <div ui-include="'../views/blocks/dropdown.notification.html'"></div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link p-0 clear" href="#" data-toggle="dropdown">
                  <span class="avatar w-32">
                    <img src="../assets/images/a0.jpg" alt="...">
                    <i class="on b-white bottom"></i>
                  </span>
                </a>
                <div ui-include="'../views/blocks/dropdown.user.html'"></div>
              </li>
              <li class="nav-item hidden-md-up">
                <a class="nav-link pl-2" data-toggle="collapse" data-target="#collapse">
                  <i class="material-icons">&#xe5d4;</i>
                </a>
              </li>
            </ul>
        </div>
    </div>
    <div class="app-footer">
      <div class="p-2 text-xs">
        <div class="pull-right text-muted py-1">
          &copy; Copyright <strong>AccessOne</strong> <span class="hidden-xs-down">- Built with Love v1.0</span>
          <a ui-scroll-to="content"><i class="fa fa-long-arrow-up p-x-sm"></i></a>
        </div>
        <div class="nav">
          <a class="nav-link" href="https://www.accessone.com.mx">Acerca de</a>
          <a class="nav-link" href="https://www.accessone.com.mx"></a>
        </div>
      </div>
    </div>
    <div ui-view class="app-body" id="view">

<div class="row-col">
  <div class="col-sm w w-auto-xs light lt bg-auto">
    <div class="padding pos-rlt">
      <div>
        <button class="btn btn-sm white pull-right hidden-sm-up" ui-toggle-class="show" target="#inbox-menu"><i class="fa fa-bars"></i></button>
        <a href class="btn btn-sm white w-xs">Recargar</a>
      </div>
      

        
<body>
    <h1>Dispositivos Offline</h1>
    <ul id="offline-list"></ul>

   <script>
    const dispositivos = [
        "ServidorAeroColima", "ServidorTepeyac", "ServidorMoroleon",
        "ServidorTacubaya", "ServidorSatelite", "ServidorAzcapotzalco", "ServidorAeropuerto",
        "ServidorCarrizal", "ServidorHoracio", "ServidorSanManuel", "ServidorPeriferico",
        "ServidorSamsOaxaca", "ServidorFerrocarril", "ServidorBuenavista", "ServidorMarianoEscobedo",
        "ServidorLaRaza", "ServidorZitacuaro", "ServidorTlalpan", "ServidorSuperamaVillaHermosa",
        "ServidorComboCuautitlan", "ServidorSamsCuautitlan1DeMayo",
        "ServidorCinepolisLeon", "ServidorAlamos",
        "ServidorAeroCDObregon", "ServidorComitan", "InterfonE1", "Entrada1", "InterfonS1", "Salida1", "InterfonC1", "Cajero1",
        "InterfonEntradaCDObregon", "EntradaCDObregon", "InterfonSalidaCDObregon", "SalidaCDObregon", "InterfonCajeroCDObregon", "CajeroCDObregon",
        "InterfonEntradaTacubaya", "EntradaTacubaya", "InterfonSalidaTacubaya", "SalidaTacubaya",
    "InterfonEntrada1Satelite", "Entrada1Satelite", "PensionesE1Satelite", "InterfonEntrada2", "Entrada2Satelite", "PensionesE2Satelite", "InterfonEntrada3", "Entrada3Satelite", "PensionesE3Satelite", "InterfonEntrada4", "Entrada4Satelite", "PensionesE4Satelite", "InterfonSalida1Satelite", "Salida1Satelite", "PensionesS1Satelite", "InterfonSalida2", "Salida2Satelite", "PensionesS2Satelite", "InterfonSalida3", "Salida3Satelite", "PensionesS3Satelite", "InterfonSalida4", "Salida4Satelite", "PensionesS4Satelite", "CajeroWalmart1Satelite", "InterfonCajeroWalmart1Satelite", "CajeroWalmart2Satelite", "InterfonCajeroWalmart2Satelite", "CajeroVipsSatelite", "InterfonCajeroVipsSatelite", "CajeroSuburbiaSatelite", "InterfonCajeroSuburbiaSatelite",
    "InterfonEntradaHoracio", "EntradaHoracio", "EntradaPensionesHoracio", "InterfonSalidaHoracio", "SalidaHoracio", "SalidaPensionesHoracio",
    "ServidorSanPedrito", "InterfonEntrada1SanPedrito", "Entrada1SanPedrito", "InterfonEntrada2SanPedrito", "Entrada2SanPedrito", "InterfonSalida1SanPedrito", "Salida1SanPedrito", "InterfonSalida2SanPedrito", "Salida2SanPedrito", "InterfonCajeroSanPedrito", "CajeroSanPedrito",
    "InterfonEntrada1Periferico", "Entrada1Periferico", "InterfonEntrada2Periferico", "Entrada2Periferico", "InterfonEntrada3Periferico", "Entrada3Periferico", "InterfonSalida1Periferico", "Salida1Periferico", "InterfonSalida2Periferico", "Salida2Periferico", "Cajero1Periferico", "InterfonCajero1Periferico", "Cajero2Periferico", "InterfonCajero2Periferico",
    "InterfonEntrada1SamsOaxaca", "Entrada1SamsOaxaca", "InterfonEntrada2SamsOaxaca", "Entrada2SamsOaxaca", "InterfonEntrada3SamsOaxaca", "Entrada3SamsOaxaca", "InterfonSalida1SamsOaxaca", "Salida1SamsOaxaca", "InterfonSalida2SamsOaxaca", "Salida2SamsOaxaca", "InterfonSalida3SamsOaxaca", "Salida3SamsOaxaca", "Cajero1SamsOaxaca", "InterfonCajero1SamsOaxaca", "Cajero2SamsOaxaca", "InterfonCajero2SamsOaxaca",
    "InterfonEntrada1Tlalpan", "Entrada1Tlalpan", "InterfonEntrada2Tlalpan", "Entrada2Tlalpan", "InterfonEntrada3Tlalpan", "Entrada3Tlalpan", "InterfonSalida1Tlalpan", "Salida1Tlalpan", "InterfonSalida2Tlalpan", "Salida2Tlalpan", "InterfonSalida3Tlalpan", "Salida3Tlalpan", "Cajero1Tlalpan", "InterfonCajero1Tlalpan", "Cajero2Tlalpan", "InterfonCajero2Tlalpan", "Cajero3Tlalpan", "InterfonCajero3Tlalpan",
    "InterfonEntrada1Ferrocarril", "Entrada1Ferrocarril", "InterfonEntrada2Ferrocarril", "Entrada2Ferrocarril", "InterfonEntrada3Ferrocarril", "Entrada3Ferrocarril", "InterfonSalida1Ferrocarril", "Salida1Ferrocarril", "InterfonSalida2Ferrocarril", "Salida2Ferrocarril", "Cajero1Ferrocarril", "InterfonCajero1Ferrocarril",
    "InterfonEntrada1SanManuel", "Entrada1SanManuel", "InterfonEntrada2SanManuel", "Entrada2SanManuel", "InterfonEntrada3SanManuel", "Entrada3SanManuel", "InterfonEntrada4SanManuel", "Entrada4SanManuel", "InterfonSalida1SanManuel", "Salida1SanManuel", "InterfonSalida2SanManuel", "Salida2SanManuel", "InterfonSalida3SanManuel", "Salida3SanManuel", "Cajero1SanManuel", "InterfonCajero1SanManuel", "Cajero2SanManuel", "InterfonCajero2SanManuel", "Cajero3SanManuel", "InterfonCajero3SanManuel",
    "InterfonEntrada1Buenavista", "Entrada1Buenavista", "InterfonEntrada2Buenavista", "Entrada2Buenavista", "InterfonEntrada3Buenavista", "Entrada3Buenavista", "InterfonSalida1Buenavista", "Salida1Buenavista", "InterfonSalida2Buenavista", "Salida2Buenavista", "InterfonSalida3Buenavista", "Salida3Buenavista", "Cajero1Buenavista", "InterfonCajero1Buenavista", "Cajero2Buenavista", "InterfonCajero2Buenavista", "Cajero3Buenavista", "InterfonCajero3Buenavista",
    "InterfonEntrada1MarianoEscobedo", "Entrada1MarianoEscobedo", "InterfonSalida1MarianoEscobedo", "Salida1MarianoEscobedo", "InterfonSalida2MarianoEscobedo", "Salida2MarianoEscobedo",
      "ServidorApatzingan", "InterfonEntrada1BApatzingan","Entrada1BApatzingan","InterfonEntrada2BApatzingan","Entrada2BApatzingan","InterfonEntrada3BApatzingan","Entrada3BApatzingan","InterfonSalida1BApatzingan","Salida1BApatzingan","InterfonSalida2BApatzingan","Salida2BApatzingan","InterfonSalida3BApatzingan","Salida3BApatzingan","Cajero1BApatzingan","InterfonCajero1BApatzingan"







    ];

    async function obtenerEstadoDispositivo(deviceId) {
        try {
            const response = await fetch(`https://mi-servidor-heartbeat-1a3a85a58124.herokuapp.com/api/status/${deviceId}`);
            if (!response.ok) throw new Error("No responde");

            const data = await response.json();
            console.log(`ð¡ ${deviceId}:`, data);

            return data; // Devuelve el JSON si todo va bien
        } catch (error) {
            console.warn(`â ï¸ ${deviceId} estÃ¡ offline o no respondiÃ³.`);
            return null; // En caso de error, devuelve null
        }
    }

    async function cargarDispositivosOffline() {
        const offlineList = document.getElementById('offline-list');
        offlineList.innerHTML = '';

        for (const deviceId of dispositivos) {
            const data = await obtenerEstadoDispositivo(deviceId);
            if (!data || data.status === "offline" || data.online === false) {
    const li = document.createElement('li');
    li.textContent = deviceId;
    offlineList.appendChild(li);
}

        }
    }

    // Ejecutar al cargar la pÃ¡gina
    cargarDispositivosOffline();
</script>



</body>


  <!-- temas map -->
  <div id="switcher">
    <div class="switcher box-color dark-white text-color" id="sw-theme">
      <a href ui-toggle-class="active" target="#sw-theme" class="box-color dark-white text-color sw-btn">
        <i class="material-icons">settings</i>
      </a>
      <div class="box-header">
        <h2>Temas del mapa</h2>
      </div>
      <div class="box-divider"></div>
      <div class="box-body">
        <p class="hidden-md-down">
          <label class="md-check m-y-xs"  data-target="folded">
            <input type="checkbox">
            <i class="green"></i>
            <span class="hidden-folded">Ocultar Opciones</span>
          </label>
          <label class="md-check m-y-xs" data-target="boxed">
            <input type="checkbox">
            <i class="green"></i>
            <span class="hidden-folded">Reducir TamaÃ±o</span>
          </label>
        </p>
        <p>Color De Fondo:</p>
        <div data-target="bg" class="row no-gutter text-u-c text-center _600 clearfix">
          <label class="p-a col-sm-6 light pointer m-0">
            <input type="radio" name="theme" value="" hidden>
            Claro
          </label>
          <label class="p-a col-sm-6 grey pointer m-0">
            <input type="radio" name="theme" value="grey" hidden>
            Gris
          </label>
          <label class="p-a col-sm-6 dark pointer m-0">
            <input type="radio" name="theme" value="dark" hidden>
            Oscuro
          </label>
          <label class="p-a col-sm-6 black pointer m-0">
            <input type="radio" name="theme" value="black" hidden>
            Negro
          </label>
        </div>
      </div>
    </div>
    
  </script>
  <script src="../libs/jquery/jquery/dist/jquery.js"></script>
  <script src="../libs/jquery/tether/dist/js/tether.min.js"></script>
  <script src="../libs/jquery/bootstrap/dist/js/bootstrap.js"></script>
  <script src="../libs/jquery/underscore/underscore-min.js"></script>
  <script src="../libs/jquery/jQuery-Storage-API/jquery.storageapi.min.js"></script>
  <script src="../libs/jquery/PACE/pace.min.js"></script>
  <script src="scripts/config.lazyload.js"></script>
  <script src="scripts/palette.js"></script>
  <script src="scripts/ui-load.js"></script>
  <script src="scripts/ui-jp.js"></script>
  <script src="scripts/ui-include.js"></script>
  <script src="scripts/ui-device.js"></script>
  <script src="scripts/ui-form.js"></script>
  <script src="scripts/ui-nav.js"></script>
  <script src="scripts/ui-screenfull.js"></script>
  <script src="scripts/ui-scroll-to.js"></script>
  <script src="scripts/ui-toggle-class.js"></script>
  <script src="scripts/app.js"></script>
  <script src="../libs/jquery/jquery-pjax/jquery.pjax.js"></script>
  <script src="scripts/ajax.js"></script>
</body>
</html>
